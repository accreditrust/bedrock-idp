<div ng-controller="brCredentialTaskController as model">
  <br-credential-task br-create-session="model.createSession(identity)"></br-credential-task>
  <stackable-modal stackable="model.display.login"
    stackable-disable-escape="true"
    br-lazy-compile="model.display.login">
    <br-login-modal
      br-identity="{{model.sysIdentifier}}"
      br-options="{
        display: { customWarning:
          (model.display.temporaryDevice &&
          'It looks like you\'re temporarily signing in from a new device, so please provide your email address and password.') ||
          (model.display.newDevice &&
          'It looks like you\'re registering a new device to sign in with, so please provide your email address and password.')
        }
      }"
      br-callback="model.loggedIn(identity)"></br-login-modal>
  </stackable-modal>
</div>
